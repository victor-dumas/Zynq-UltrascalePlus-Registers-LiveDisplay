<!doctype html>
<html>
<head>
<title>GUSB3PIPECTL (USB3_XHCI) Register</title>
<meta name="robots" content="noindex, nofollow" />
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/_register_reference.css')}}">
<script src="xilfunctions.js" type="text/javascript"></script>
</head>
<body>
<p class=header><a href=# onclick=gotoTopic("_overview.html")>Zynq UltraScale+ Devices Register Reference</a> &gt; <a href=# onclick=gotoTopic("_module_summary.html")>Module Summary</a> &gt; <a href=# onclick=gotoTopic("mod___usb3_xhci.html")>USB3_XHCI Module</a> &gt; GUSB3PIPECTL (USB3_XHCI) Register</p><h1>GUSB3PIPECTL (USB3_XHCI) Register</h1>
<h2>GUSB3PIPECTL (USB3_XHCI) Register Description</h2>
<table class=noborder>
<tr valign=top><th width=20% class=sumparam>Register Name</th><td width=80% class=noborder>GUSB3PIPECTL</td></tr>
<tr valign=top><th class=sumparam>Relative Address</th><td class=noborder id="registerOffset">0x000000C2C0</td></tr>
<tr valign=top><th class=sumparam>Absolute Address</th><td class=noborder>
0x00FE20C2C0 (USB3_0_XHCI)<br/>0x00FE30C2C0 (USB3_1_XHCI)
</td></tr>
<tr valign=top><th class=sumparam>Width</th><td class=noborder>32</td></tr>
<tr valign=top><th class=sumparam>Type</th><td class="tooltip2 noborder">mixed<span class="tooltiptext">Mixed types. See bit-field details.</span></td></tr>
<tr valign=top><th class=sumparam>Reset Value</th><td class=noborder>0x010C0002</td></tr>
<tr valign=top><th class=sumparam>Description</th><td class=noborder>Global USB 3.0 PIPE Control Register<br/>The application uses this register to configure the USB3 PHY and PIPE interface.<br/>Device-only configuration requires only one register. In Host mode, registers are implemented for each port.<br/>Note:<br/>- GUSB3PIPECTLn registers are not applicable for USB 2.0-only mode.</td></tr>
</table>
<p></p>
<h2>GUSB3PIPECTL (USB3_XHCI) Register Bit-Field Summary</h2>
<table>
<tr valign=top><th width=20%>Field Name</th><th width=10%>Bits</th><th width=10%>Type</th><th width=10%>Reset Value</th><th width=50%>Description</th></tr>
<tr valign=top><td>PHYSoftRst</td><td class="center">31</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>USB3 PHY Soft Reset<br/>After setting this bit to '1', the software needs to clear this bit.</td></tr>
<tr valign=top><td>HstPrtCmpl</td><td class="center">30</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>HstPrtCmpl<br/>This feature tests the PIPE PHY compliance patterns without having to have a test fixture on the USB 3.0 cable.<br/>This bit enables placing the SS port link into a compliance state. By default, this bit must be set to 1'b0.<br/>In compliance lab testing, the SS port link enters compliance after failing the first polling sequence after power on. Set this bit to 0, when you run compliance tests.<br/>The sequence for using this functionality is as follows:<br/>- 1. Disconnect any plugged in devices.<br/>- 2. Perform USBCMD.HCRST or power-on-chip reset.<br/>- 3. Set PORTSC.PP=0.<br/>- 4. Set GUSB3PIPECTL. HstPrtCmpl=1. This places the link into compliance state.<br/>To advance the compliance pattern, follow this sequence (toggle the set GUSB3PIPECTL. HstPrtCmpl):<br/>- 1. Set GUSB3PIPECTL.HstPrtCmpl=0.<br/>- 2. Set GUSB3PIPECTL.HstPrtCmpl=1. This advances the link to the next compliance pattern.<br/>To exit from the compliance state perform USBCMD.HCRST or power-on-chip reset.</td></tr>
<tr valign=top><td>U2SSInactP3ok</td><td class="center">29</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>P3 OK for U2/SSInactive (u2SSInactP3ok)<br/>- 0: During link state U2/SS.Inactive, put PHY in P2 (Default)<br/>- 1: During link state U2/SS.Inactive, put PHY in P3.<br/>Note: For a port, if GUSB3PIPECTL[7]=1 and<br/>GUSB3PIPECTL[29]=1, set GUSB3PIPECTL[11] to 1.</td></tr>
<tr valign=top><td>DisRxDetP3</td><td class="center">28</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Disabled receiver detection in P3 (DisRxDetP3)<br/>- 0: If PHY is in P3 and Core needs to perform receiver detection, The core performs receiver detection in P3. (Default)<br/>- 1: If PHY is in P3 and Core needs to perform receiver detection, The core changes the PHY power state to P2 and then performs receiver detection. After receiver detection, the cores changes PHY power state to P3.</td></tr>
<tr valign=top><td>Ux_exit_in_Px</td><td class="center">27</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Ux Exit in Px (Ux_exit_in_Px)<br/>- 0: The core does U1/U2/U3 exit in PHY power state P0 (default behavior).<br/>- 1: The core does U1/U2/U3 exit in PHY power state P1/P2/P3 respectively.<br/>This bit is added for SS PHY workaround where SS PHY injects a glitch on pipe3_RxElecIdle while receiving Ux exit LFPS, and pipe3_PowerDown change is in progress.<br/>Note: This bit is used by third-party SS PHY. It must be set to '0' for<br/>PHY. For<br/>configuration, Ux_exit_in_Px field of GUSB3PIPECTL register must never be set to 1</td></tr>
<tr valign=top><td>ping_enhancement_en</td><td class="center">26</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Ping Enhancement Enable (ping_enhancement_en)<br/>When set, the Downstream port U1 ping receive timeout becomes 500 ms instead of 300 ms. Minimum Ping.LFPS receive duration is 8 ns (one mac3_clk). This field is valid for the downstream port only.<br/>Note: This bit is used by third-party SS PHY. It must be set to '0' for<br/>PHY.</td></tr>
<tr valign=top><td>u1u2exitfail_to_recov</td><td class="center">25</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>U1U2exitfail to Recovery (u1u2exitfail_to_recov)<br/>When set, and U1/U2 LFPS handshake fails, the LTSSM transitions from U1/U2 to Recovery instead of SS Inactive. If Recovery fails, then the LTSSM can enter SS.Inactive. This is an enhancement only. It prevents interoperability issue if the remote link does not do proper handshake.</td></tr>
<tr valign=top><td>request_p1p2p3</td><td class="center">24</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x1</td><td>Always Request P1/P2/P3 for U1/U2/U3 (request_p1p2p3)<br/>When set, the core always requests PHY power change from P0 to P1/P2/P3 during U0 to U1/U2/U3 transition.<br/>If this bit is 0, and immediate Ux exit (remotely initiated, or locally initiated) happens, the core does not request P1/P2/P3 power state change.<br/>Note: This bit must be set to '1' for<br/>PHY. For third-party SS PHY, check with your PHY vendor.</td></tr>
<tr valign=top><td>StartRxDetU3RxDet</td><td class="center">23</td><td class="tooltip">wo<span class="tooltiptext">Write-only</span></td><td class="hex">0x0</td><td>Start Receiver Detection in U3/Rx.Detect (StartRxdetU3RxDet)<br/>If DWC_USB3_GUSB3PIPECTL_INIT[22] is set, and the link is in either U3 or Rx.Detect state, the core starts receiver detection on the rising edge of this bit. This can only be used for Downstream ports. This bit must be set to '0' for Upstream ports. This feature must not be enabled for normal operation. If have to use this feature, contact.</td></tr>
<tr valign=top><td>DisRxDetU3RxDet</td><td class="center">22</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Disable Receiver Detection in U3/Rx.Det<br/>When set, the core does not handle receiver detection in either U3 or Rx.Detect states. DWC_USB3_GUSB3PIPECTL_INIT[23] must be used to start receiver detection manually. This bit can only be used for the downstream port. This bit must be set to '0' for Upstream ports. This feature must not be enabled for normal operation.</td></tr>
<tr valign=top><td>DelayP1P2P3</td><td class="center">21:19</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x1</td><td>Delay P1P2P3<br/>Delay P0 to P1/P2/P3 request when entering U1/U2/U3 until (DWC_USB3_GUSB3PIPECTL_INIT[21:19]*8) 8B10B error occurs, or Pipe3_RxValid drops to 0.</td></tr>
<tr valign=top><td>DELAYP1TRANS</td><td class="center">18</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x1</td><td>Delay PHY power change from P0 to P1/P2/P3 when link state changing from U0 to U1/U2/U3 respectively.<br/>- 1'b1: When entering U1/U2/U3, delay the transition to P1/P2/P3 until the pipe3 signals, Pipe3_RxElecIlde is 1 and pipe3_RxValid is 0<br/>- 1'b0: When entering U1/U2/U3, transition to P1/P2/P3 without checking for Pipe3_RxElecIlde and pipe3_RxValid.<br/>Note: This bit must be set to '1' for<br/>PHY. It is also used by third-party SS PHY.</td></tr>
<tr valign=top><td>SUSPENDENABLE</td><td class="center">17</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Suspend USB3.0 SS PHY (Suspend_en)<br/>When set, and if Suspend conditions are valid, the USB 3.0 PHY enters Suspend mode.<br/>The application must clear this bit after power-on reset. Application needs to set it to '1' after the core initialization is completed.</td></tr>
<tr valign=top><td>DATWIDTH</td><td class="center">16:15</td><td class="tooltip">ro<span class="tooltiptext">Read-only</span></td><td class="hex">0x0</td><td>PIPE Data Width (DatWidth)<br/>- 2'b00: 32 bits<br/>- 2'b01: 16 bits<br/>- 2'b10: 8 bits<br/>One clock after reset, these bits receive the value seen on the pipe3_DataBusWidth.</td></tr>
<tr valign=top><td>AbortRxDetInU2</td><td class="center">14</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Abort Rx Detect in U2 (AbortRxDetInU2)<br/>When set, and the link state is U2, then the core will abort receiver detection if it receives U2 exit LFPS from the remote link partner. This bit is for the downstream port only.<br/>Note: This bit is used by third-party SS PHY. It must be set to '0' for<br/>PHY.</td></tr>
<tr valign=top><td>SkipRxDet</td><td class="center">13</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Skip Rx Detect:<br/>When set, the core skips Rx Detection if pipe3_RxElecIdle is low.<br/>Skip is defined as waiting for the appropriate timeout, then repeating the operation.</td></tr>
<tr valign=top><td>LFPSP0Algn</td><td class="center">12</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>LFPS P0 Align:<br/>When set,<br/>- The core deasserts LFPS transmission on the clock edge that it requests Phy power state 0 when exiting U1, U2, or U3 low power states. Otherwise, LFPS transmission is asserted one clock earlier.<br/>- The core requests symbol transmission two pipe3_rx_pclks periods after the PHY asserts PhyStatus as a result of the PHY switching from P1 or P2 state to P0 state.<br/>Currently, this bit is only used in USB 3.0 HUB with<br/>PHY. For other USB 3.0 Host, Device, and DRD cores, this bit is not required.</td></tr>
<tr valign=top><td>P3P2TranOK</td><td class="center">11</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>P3 P2 Transitions OK (P3P2TranOK)<br/>When set, the core transitions directly from Phy power state P2 to P3 or from state P3 to P2.<br/>When not set, P0 is always entered as an intermediate state during transitions between P2 and P3, as defined in the PIPE3 Specification.<br/>According to the PIPE3 Specification, any direct transition between P3 and P2 is illegal.<br/>Note: This bit is used by third-party SS PHY. It must be set to '0' for<br/>PHY. add this as reference https://www.intel.in/content/dam/doc/white-paper/usb3-phy-interface-pci-express-paper.pdf</td></tr>
<tr valign=top><td>P3ExSigP2</td><td class="center">10</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>P3 Exit Signal in P2 (P3ExSigP2)<br/>When this bit is set, the core always changes the PHY power state to P2, before attempting a U3 exit handshake. This bit is used only for some non- PHYs that cannot do LFPS in P3.<br/>Note: This bit is used by third-party SS PHY. It must be set to '0' for<br/>PHY.</td></tr>
<tr valign=top><td>LFPSFILTER</td><td class="center"> 9</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>LFPS Filter (LFPSFilt)<br/>When set, filter LFPS reception with pipe3_RxValid in PHY power state P0, that is, ignore LFPS reception from the PHY unless both pipe3_Rxelecidle and pipe3_RxValid are deasserted.</td></tr>
<tr valign=top><td>RX_DETECT_to_Polling_LFPS_Control</td><td class="center"> 8</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>RX_DETECT to Polling.LFPS Control<br/>- 1'b0 (Default): Enables a 400us delay to start Polling LFPS after RX_DETECT. This allows VCM offset to settle to a proper level.<br/>- 1'b1: Disables the 400us delay to start Polling LFPS after RX_DETECT.<br/>During controller certification with third party PHY it is observed that the PHY is not able to meet the Tx AC common mode voltage active (VTX-CM-ACPP_ACTIVE &lt;100mv) if the link starts polling within 80us from the time rx.detect is performed.<br/>To meet this VTX-CM-ACPP_ACTIVE specification, the polling must be delayed further. If the PHY does not have issue then they can set this bit to 1 which allows polling to start within 80us.</td></tr>
<tr valign=top><td>SSICEn</td><td class="center"> 7</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>USB3 SSIC Enable (SSICEn)<br/>- 1'b0: Pipe interface is active. The RMMI interface on the corresponding port is reset by the core.<br/>- 1'b1: RMMI interface on the corresponding port connected to M-PHY is active, and pipe interface is inactive. This bit needs to be set before accessing the corresponding GUSB3RMMICTLn register.</td></tr>
<tr valign=top><td>TX_SWING</td><td class="center"> 6</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Tx Swing (TxSwing)<br/>Refer to the PIPE3 specification. add this as reference https://www.intel.in/content/dam/doc/white-paper/usb3-phy-interface-pci-express-paper.pdf</td></tr>
<tr valign=top><td>TX_MARGIN</td><td class="center"> 5:3</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Tx Margin[2:0] (TxMargin)<br/>Refer to Table 5-3 of the PIPE3 Specification. add this as reference https://www.intel.in/content/dam/doc/white-paper/usb3-phy-interface-pci-express-paper.pdf</td></tr>
<tr valign=top><td>TX_DE_EPPHASIS</td><td class="center"> 2:1</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x1</td><td>Tx Deemphasis (TxDeemphasis)<br/>The value driven to the PHY is controlled by the LTSSM during USB3 Compliance mode.<br/>(Refer to Table 5-3 of the PIPE3 specification.) add this as reference https://www.intel.in/content/dam/doc/white-paper/usb3-phy-interface-pci-express-paper.pdf</td></tr>
<tr valign=top><td>ELASTIC_BUFFER_MODE</td><td class="center"> 0</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0x0</td><td>Elastic Buffer Mode (ElasticBufferMode)<br/>This bit should be set during boot time and not changed afterwards<br/>(Refer to Table 5-3 of the PIPE3 specification.) add this as reference https://www.intel.in/content/dam/doc/white-paper/usb3-phy-interface-pci-express-paper.pdf</td></tr>
</table><p id=foot class=footer></p>
</body>
</html>