<!doctype html>
<html>
<head>
<title>GUSB2PHYCFG (USB3_XHCI) Register</title>
<meta name="robots" content="noindex, nofollow" />
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/_register_reference.css')}}">
<script src="xilfunctions.js" type="text/javascript"></script>
</head>
<body>
<p class=header><a href=# onclick=gotoTopic("_overview.html")>Zynq UltraScale+ Devices Register Reference</a> &gt; <a href=# onclick=gotoTopic("_module_summary.html")>Module Summary</a> &gt; <a href=# onclick=gotoTopic("mod___usb3_xhci.html")>USB3_XHCI Module</a> &gt; GUSB2PHYCFG (USB3_XHCI) Register</p><h1>GUSB2PHYCFG (USB3_XHCI) Register</h1>
<h2>GUSB2PHYCFG (USB3_XHCI) Register Description</h2>
<table class=noborder>
<tr valign=top><th width=20% class=sumparam>Register Name</th><td width=80% class=noborder>GUSB2PHYCFG</td></tr>
<tr valign=top><th class=sumparam>Relative Address</th><td class=noborder id="registerOffset">0x000000C200</td></tr>
<tr valign=top><th class=sumparam>Absolute Address</th><td class=noborder>
0x00FE20C200 (USB3_0_XHCI)<br/>0x00FE30C200 (USB3_1_XHCI)
</td></tr>
<tr valign=top><th class=sumparam>Width</th><td class=noborder>32</td></tr>
<tr valign=top><th class=sumparam>Type</th><td class="tooltip2 noborder">mixed<span class="tooltiptext">Mixed types. See bit-field details.</span></td></tr>
<tr valign=top><th class=sumparam>Reset Value</th><td class=noborder>0x00000000</td></tr>
<tr valign=top><th class=sumparam>Description</th><td class=noborder>Global USB2 PHY Configuration Register<br/>The application must program this register before starting any transactions on either the SoC bus or the USB.<br/>In Device-only configurations, only one register is needed.<br/>In Host mode, per-port registers are implemented.</td></tr>
</table>
<p></p>
<h2>GUSB2PHYCFG (USB3_XHCI) Register Bit-Field Summary</h2>
<table>
<tr valign=top><th width=20%>Field Name</th><th width=10%>Bits</th><th width=10%>Type</th><th width=10%>Reset Value</th><th width=50%>Description</th></tr>
<tr valign=top><td>PHYSOFTRST</td><td class="center">31</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>UTMI PHY Soft Reset (PHYSoftRst)<br/>Causes the usb2phy_reset signal to be asserted to reset a UTMI PHY. Not applicable to ULPI because ULPI PHYs are reset via their FunctionControl.Reset register, and the core automatically writes to this register when the core is reset (vcc_reset_n, USBCMD.HCRST, DCTL.SoftReset, or GCTL.SoftReset)</td></tr>
<tr valign=top><td>U2_FREECLK_EXISTS</td><td class="center">30</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>U2_FREECLK_EXISTS<br/>Specifies whether your USB 2.0 PHY provides a free-running PHY clock, which is active when the clock control input is active.<br/>If your USB 2.0 PHY provides a free-running PHY clock, it must be connected to the utmi_clk[0] input. The remaining utmi_clk[n] must be connected to the respective port clocks. The core uses the Port-0 clock for generating the internal mac2 clock.<br/>- 1'b0: USB 2.0 free clock does not exist<br/>- 1'b1: USB 2.0 free clock exists<br/>Note: When the core is configured as device-only (DWC_USB3_MODE = 0), do not set this bit to 1.</td></tr>
<tr valign=top><td>ULPI_LPM_WITH_OPMODE_CHK</td><td class="center">29</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>ULPI_LPM_WITH_OPMODE_CHK<br/>Support the LPM over ULPI without NOPID token to the ULPI PHY.<br/>If this bit is set, the ULPI PHY is expected to qualify the EXT PID with OPMODE=2'b00 for LPM and not treat it as a NOPID. Check with your PHY vendor about your PHY behavior. This bit is valid only when the DWC_USB3_HSPHY_INTERFACE parameter is 2 or 3.<br/>- 1'b0: A NOPID is sent before sending an EXTPID for LPM;<br/>- 1'b1: An EXTPID is sent without previously sending a NOPID;<br/>Note: This bit is valid only in host mode. This bit should be '0' for<br/>PHY.</td></tr>
<tr valign=top><td>HSIC_CON_WIDTH_ADJ</td><td class="center">28:27</td><td class="tooltip">ro<span class="tooltiptext">Read-only</span></td><td class="hex">0</td><td>HSIC_CON_WIDTH_ADJ<br/>This bit is used in the HSIC device mode of operation. By default, the connect duration for the HSIC device controller is thrice the strobe period. You can change this duration to 4, 5, or 6 times the strobe period by setting the value of this field to 1, 2, or 3. This value is added to the default connect duration.</td></tr>
<tr valign=top><td>INV_SEL_HSIC</td><td class="center">26</td><td class="tooltip">ro<span class="tooltiptext">Read-only</span></td><td class="hex">0</td><td>INV_SEL_HSIC<br/>The application driver uses this bit to control the HSIC enable/disable function. When set to '1', this bit overrides and functionally inverts the 'if_select_hsic' input signal.<br/>If {INV_SEL_HSIC, if_select_hsic} is:<br/>- 00: HSIC Capability is disabled.<br/>- 01: HSIC Capability is enabled.<br/>- 10: HSIC Capability is enabled.<br/>- 11: HSIC Capability is disabled.<br/>If the controller operates as non-HSIC-capable, it can only connect to non-HSIC-capable PHYs. If it operates as HSIC-capable, it can connect to HSIC-capable PHYs.<br/>This bit is reserved if the DWC_USB3_ENABLE_HSIC parameter is set to '0'. When selecting the HSIC feature, set the host side to HSIC mode first, then set the device mode side. If the device side is set to HSIC mode first and if the host does not see a connection in HSIC mode, then you must de-select the device HSIC mode and select it again using the if_select_hsic setting or register bit GUSB2PHYCFGn[26] to ensure that the device can connect to the host.</td></tr>
<tr valign=top><td class="grayback">Reserved</td><td class="grayback center">25</td><td class="tooltip grayback">ro<span class="tooltiptext">Read-only</span></td><td class="hex grayback">0x0</td><td class=grayback>Reserved</td></tr>
<tr valign=top><td>LSTRD</td><td class="center">24:22</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>LS Turnaround Time (LSTRDTIM)<br/>This field indicates the value of the Rx-to-Tx packet gap for LS devices. The encoding is as follows:<br/>- 0: 2 bit times<br/>- 1: 2.5 bit times<br/>- 2: 3 bit times<br/>- 3: 3.5 bit times<br/>- 4: 4 bit times<br/>- 5: 4.5 bit times<br/>- 6: 5 bit times<br/>- 7: 5.5 bit times<br/>Note:<br/>- This field is applicable only in Host mode.<br/>- For normal operation (to work with most LS devices), set the default value of this field to 3'h0 (2 bit times).<br/>- The programmable LS device inter-packet gap and turnaround delays are provided to support some legacy LS devices that might require different delays than the default/fixed ones. For instance, the Open LS mouse requires 3 bit times of inter-packet gap to work correctly.<br/>- Include your PHY delays when programming the LSIPD/LSTRDTIM values. For example, if your PHY's TxEndDelay in LS mode is 30 UTMI/ULPI CLKs, then subtract this delay (~1 LS bit time) from the device's delay requirement.</td></tr>
<tr valign=top><td>LSIPD</td><td class="center">21:19</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>LS Inter-Packet Time (LSIPD)<br/>This field indicates the value of Tx-to-Tx packet gap for LS devices. The encoding is as follows:<br/>- 0: 2 bit times<br/>- 1: 2.5 bit times<br/>- 2: 3 bit times<br/>- 3: 3.5 bit times<br/>- 4: 4 bit times<br/>- 5: 4.5 bit times<br/>- 6: 5 bit times<br/>- 7: 5.5 bit times<br/>Note:<br/>- This field is applicable only in Host mode.<br/>- For normal operation (to work with most LS devices), set the default value of this field to 3'h2 (3 bit times).<br/>- The programmable LS device inter-packet gap and turnaround delays are provided to support some legacy LS devices that might require different delays than the default/fixed ones. For instance, the AOpen LS mouse requires 3 bit times of inter-packet gap to work correctly.<br/>- Include your PHY delays when programming the LSIPD/LSTRDTIM values. For example, if your PHY's TxEndDelay in LS mode is 30 UTMI/ULPI CLKs, then subtract this delay (~1 LS bit time) from the device's delay requirement.</td></tr>
<tr valign=top><td>ULPIEXTVBUSINDIACTOR</td><td class="center">18</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>ULPI External VBUS Indicator (ULPIExtVbusIndicator)<br/>Indicates the ULPI PHY VBUS over-current indicator.<br/>- 1'b0: PHY uses an internal VBUS valid comparator.<br/>- 1'b1: PHY uses an external VBUS valid comparator.<br/>Valid only when RTL parameter DWC_USB3_HSPHY_INTERFACE = 2 or 3</td></tr>
<tr valign=top><td>ULPIEXTVBUSDRV</td><td class="center">17</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>ULPI External VBUS Drive (ULPIExtVbusDrv)<br/>Selects supply source to drive 5V on VBUS, in the ULPI PHY.<br/>- 1'b0: PHY drives VBUS with internal charge pump (default).<br/>- 1'b1: PHY drives VBUS with an external supply.<br/>(Only when RTL parameter DWC_USB3_HSPHY_INTERFACE = 2 or 3)</td></tr>
<tr valign=top><td class="grayback">Reserved</td><td class="grayback center">16</td><td class="tooltip grayback">ro<span class="tooltiptext">Read-only</span></td><td class="hex grayback">0x0</td><td class=grayback>Reserved</td></tr>
<tr valign=top><td>ULPIAUTORES</td><td class="center">15</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>ULPI Auto Resume (ULPIAutoRes)<br/>Sets the AutoResume bit in Interface Control register on the ULPI PHY.<br/>- 1'b0: PHY does not use the AutoResume feature.<br/>- 1'b1: PHY uses the AutoResume feature.<br/>Valid only when RTL parameter DWC_USB3_HSPHY_INTERFACE = 2 or 3</td></tr>
<tr valign=top><td class="grayback">Reserved</td><td class="grayback center">14</td><td class="tooltip grayback">ro<span class="tooltiptext">Read-only</span></td><td class="hex grayback">0x0</td><td class=grayback>Reserved</td></tr>
<tr valign=top><td>USBTRDTIM</td><td class="center">13:10</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>USB 2.0 Turnaround Time (USBTrdTim)<br/>Sets the turnaround time in PHY clocks.<br/>Specifies the response time for a MAC request to the Packet FIFO Controller (PFC) to fetch data from the DFIFO (SPRAM).<br/>The following are the required values for the minimum SoC bus frequency of 60 MHz. USB turnaround time is a critical certification criteria when using long cables and five hub levels.<br/>The required values for this field:<br/>- 4'h5: When the MAC interface is 16-bit UTMI+.<br/>- 4'h9: When the MAC interface is 8-bit UTMI+/ULPI.<br/>If SoC bus clock is less than 60 MHz, and USB turnaround time is not critical, this field can be set to a larger value.<br/>Note: This field is valid only in device mode.</td></tr>
<tr valign=top><td>XCVRDLY</td><td class="center"> 9</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>Transceiver Delay:<br/>Enables a delay between the assertion of the UTMI/ULPI Transceiver Select signal (for HS) and the assertion of the TxValid signal during a HS Chirp.<br/>When this bit is set to 1, a delay (of approximately 2.5 us) is introduced from the time when the Transceiver Select is set to 2'b00 (HS) to the time the TxValid is driven to 0 for sending the chirp-K. This delay is required for some UTMI/ULPI PHYs.<br/>Note:<br/>- If you enable the hibernation feature when the device core comes out of power-off, you must re-initialize this bit with the appropriate value because the core does not save and restore this bit value during hibernation.<br/>- This bit is valid only in device mode.</td></tr>
<tr valign=top><td>ENBLSLPM</td><td class="center"> 8</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>Enable utmi_sleep_n and utmi_l1_suspend_n (EnblSlpM)<br/>The application uses this bit to control utmi_sleep_n and utmi_l1_suspend_n assertion to the PHY in the L1 state.<br/>- 1'b0: utmi_sleep_n and utmi_l1_suspend_n assertion from the core is not transferred to the external PHY.<br/>- 1'b1: utmi_sleep_n and utmi_l1_suspend_n assertion from the core is transferred to the external PHY.<br/>Note: This bit must be set high for Port0 if<br/>PHY is used.<br/>Note: In Device mode - Before issuing any device endpoint command when operating in 2.0 speeds, disable this bit and enable it after the command completes. Without disabling this bit, if a command is issued when the device is in L1 state and if mac2_clk (utmi_clk/ulpi_clk) is gated off, the command will not get completed.</td></tr>
<tr valign=top><td>PHYSEL</td><td class="center"> 7</td><td class="tooltip">wo<span class="tooltiptext">Write-only</span></td><td class="hex">0</td><td>USB 2.0 High-Speed PHY or USB 1.1 Full-Speed Serial Transceiver Select<br/>The application uses this bit to select a high-speed PHY or a full-speed transceiver.<br/>- 1'b0: USB 2.0 high-speed UTMI+ or ULPI PHY. This bit is always 0, with Write Only access.<br/>- 1'b1: USB 1.1 full-speed serial transceiver. This bit is always 1, with Write Only access.<br/>Note: USB 1.1 full-serial transceiver is not supported. This bit always reads as 1'b0.</td></tr>
<tr valign=top><td>SUSPENDUSB20</td><td class="center"> 6</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>Suspend USB2.0 HS/FS/LS PHY (SusPHY)<br/>When set, USB2.0 PHY enters Suspend mode if Suspend conditions are valid.<br/>Note:<br/>- In host mode, on reset, this bit is set to 1. Software can override this bit after reset.<br/>- In device mode, before issuing any device endpoint command when operating in 2.0 speeds, disable this bit and enable it after the command completes. If you issue a command without disabling this bit when the device is in L2 state and if mac2_clk (utmi_clk/ulpi_clk) is gated off, the command will not get completed.</td></tr>
<tr valign=top><td>FSINTF</td><td class="center"> 5</td><td class="tooltip">ro<span class="tooltiptext">Read-only</span></td><td class="hex">0</td><td>Full-Speed Serial Interface Select (FSIntf)<br/>The application uses this bit to select a unidirectional or bidirectional USB 1.1 full-speed serial transceiver interface.<br/>- 1'b0: 6-pin unidirectional full-speed serial interface. This bit is set to 0 with Read Only access.<br/>- 1'b1: 3-pin bidirectional full-speed serial interface. This bit is set to 0 with Read Only access.<br/>Note: USB 1.1 full-speed serial interface is not supported. This bit always reads as 1'b0.</td></tr>
<tr valign=top><td>ULPI_UTMI_Sel</td><td class="center"> 4</td><td class="tooltip">ro<span class="tooltiptext">Read-only</span></td><td class="hex">0</td><td>ULPI or UTMI+ Select (ULPI_UTMI_Sel)<br/>The application uses this bit to select a UTMI+ or ULPI Interface.<br/>- 1'b0: UTMI+ Interface<br/>- 1'b1: ULPI Interface</td></tr>
<tr valign=top><td>PHYIF</td><td class="center"> 3</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>PHY Interface (PHYIf)<br/>If UTMI+ is selected, the application uses this bit to configure the core to support a UTMI+ PHY with an 8- or 16-bit interface.<br/>- 1'b0: 8 bits<br/>- 1'b1: 16 bits<br/>ULPI Mode: 1'b0<br/>Note:<br/>- All the enabled 2.0 ports must have the same clock frequency as Port0 clock frequency (utmi_clk[0]).<br/>- The UTMI 8-bit and 16-bit modes cannot be used together for different ports at the same time (that is, all the ports must be in 8-bit mode, or all of them must be in 16-bit mode, at a time).<br/>- If any of the USB 2.0 ports is selected as ULPI port for operation, then all the USB 2.0 ports must be operating at 60 MHz.</td></tr>
<tr valign=top><td>TOutCal</td><td class="center"> 2:0</td><td class="tooltip">rw<span class="tooltiptext">Normal read/write</span></td><td class="hex">0</td><td>HS/FS Timeout Calibration (TOutCal)<br/>The number of PHY clocks, as indicated by the application in this field, is multiplied by a bit-time factor; this factor is added to the high-speed/full-speed interpacket timeout duration in the core to account for additional delays introduced by the PHY. This may be required, since the delay introduced by the PHY in generating the linestate condition may vary among PHYs.<br/>The USB standard timeout value for high-speed operation is 736 to 816 (inclusive) bit times. The USB standard timeout value for full-speed operation is 16 to 18 (inclusive) bit times. The application must program this field based on the speed of connection. The number of bit times added per PHY clock are:<br/>High-speed operation:<br/>- One 30-MHz PHY clock = 16 bit times<br/>- One 60-MHz PHY clock = 8 bit times<br/>Full-speed operation:<br/>- One 30-MHz PHY clock = 0.4 bit times<br/>- One 60-MHz PHY clock = 0.2 bit times<br/>- One 48-MHz PHY clock = 0.25 bit times</td></tr>
</table><p id=foot class=footer></p>
</body>
</html>